(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{445:function(t,s,a){"use strict";a.r(s);var e=a(17),n=function(t){t.options.__data__block__={mermaid_382ee1e5:"sequenceDiagram\n  autonumber\n\n  participant A as API Server\n  participant S as Scheduler\n  participant K as Kubelet\n  participant C as Container\n\n  Note left of A: 💻 kubectl run\n\n  loop\n    S->>A: 할당되지 않은 Pod 감시\n    S->>A: Pod을 노드에 할당\n  end\n\n  loop\n    K->>A: 노드에 할당된 Pod 감시\n    K->>C: 컨테이너 생성\n    K->>A: Pod 상태 전달\n  end\n"}},r=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"pod"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pod"}},[t._v("#")]),t._v(" Pod")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("⚡️ 목표")]),t._v(" "),a("p",[t._v("Pod이 무엇인지 알아보고 기본적인 사용법을 익힙니다. YAML을 이용하여 설정파일을 작성합니다.")])]),t._v(" "),a("p",[t._v("Pod은 쿠버네티스에서 관리하는 가장 작은 배포 단위입니다.")]),t._v(" "),a("p",[t._v("쿠버네티스와 도커의 차이점은 도커는 컨테이너를 만들지만, 쿠버네티스는 컨테이너 대신 Pod을 만듭니다. Pod은 한 개 또는 여러 개의 컨테이너를 포함합니다.")]),t._v(" "),a("p",[t._v("컨테이너가 아니라 Pod을 사용하고 여러개의 컨테이너를 포함할 수 있다고...? 🤔 무슨말인지 확인해봅시다.")]),t._v(" "),a("p"),a("div",{staticClass:"table-of-contents"},[a("ul",[a("li",[a("a",{attrs:{href:"#빠르게-pod-만들기"}},[t._v("빠르게 Pod 만들기")]),a("ul",[a("li",[a("a",{attrs:{href:"#pod-생성-분석"}},[t._v("Pod 생성 분석")])])])]),a("li",[a("a",{attrs:{href:"#yaml로-설정파일-sup-spec-sup-작성하기"}},[t._v("YAML로 설정파일"),a("sup",[t._v("Spec")]),t._v(" 작성하기")])]),a("li",[a("a",{attrs:{href:"#컨테이너-상태-모니터링"}},[t._v("컨테이너 상태 모니터링")]),a("ul",[a("li",[a("a",{attrs:{href:"#livenessprobe"}},[t._v("livenessProbe")])]),a("li",[a("a",{attrs:{href:"#readinessprobe"}},[t._v("readinessProbe")])]),a("li",[a("a",{attrs:{href:"#livenessprobe-readinessprobe"}},[t._v("livenessProbe + readinessProbe")])])])]),a("li",[a("a",{attrs:{href:"#다중-컨테이너"}},[t._v("다중 컨테이너")])]),a("li",[a("a",{attrs:{href:"#마무리"}},[t._v("마무리")])]),a("li",[a("a",{attrs:{href:"#참고"}},[t._v("참고")])]),a("li",[a("a",{attrs:{href:"#실습"}},[t._v("실습")])])])]),a("p"),t._v(" "),a("h2",{attrs:{id:"빠르게-pod-만들기"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#빠르게-pod-만들기"}},[t._v("#")]),t._v(" 빠르게 Pod 만들기")]),t._v(" "),a("p",[a("code",[t._v("docker run")]),t._v("에 익숙한 분들을 위해 "),a("code",[t._v("kubectl run")]),t._v(" 명령어를 소개합니다.")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("kubectl run "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" --image ghcr.io/subicura/echo:v1\n")])])]),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[t._v("주의")]),t._v(" "),a("p",[t._v("kubernetes v1.18 이상은 "),a("code",[t._v("run")]),t._v("명령어가 Pod을 만들지만 v1.17 이하는 Deployment를 만듭니다.")])]),t._v(" "),a("p",[a("code",[t._v("echo")]),t._v("라는 이름의 Pod이 잘 생성되었는지 확인합니다.")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Pod 목록 조회")]),t._v("\nkubectl get pod\n")])])]),a("p",[a("strong",[t._v("실행 결과")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("div",{staticClass:"highlight-lines"},[a("br"),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("br")]),a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("NAME   READY   STATUS              RESTARTS   AGE\necho   0/1     ContainerCreating   0          10s\n")])])]),a("p",[t._v("생성된 Pod의 상태를 간략하게 확인할 수 있습니다. 상태"),a("sup",[t._v("STATUS")]),t._v("는 컨테이너가 정상적으로 생성되면 "),a("code",[t._v("Running")]),t._v("으로 바뀌고 오류가 있다면 에러 상태를 표시합니다.")]),t._v(" "),a("p",[t._v("그럼 더 상세하게 Pod의 상태를 확인해봅니다.")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 단일 Pod 상세 확인")]),t._v("\nkubectl describe pod/echo\n")])])]),a("p",[a("strong",[t._v("실행 결과")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("div",{staticClass:"highlight-lines"},[a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("br")]),a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('Name:         echo\nNamespace:    default\nPriority:     0\nNode:         minikube/192.168.64.5\n\n...(생략)...\n\nEvents:\n  Type    Reason     Age   From               Message\n  ----    ------     ----  ----               -------\n  Normal  Scheduled  68s   default-scheduler  Successfully assigned default/echo to minikube\n  Normal  Pulling    68s   kubelet            Pulling image "ghcr.io/subicura/echo:v1"\n  Normal  Pulled     35s   kubelet            Successfully pulled image "ghcr.io/subicura/echo:v1" in 33.176019499s\n  Normal  Created    35s   kubelet            Created container echo\n  Normal  Started    35s   kubelet            Started container echo\n')])])]),a("p",[a("code",[t._v("describe")]),t._v(" 명령어는 해당 리소스의 상세한 정보를 알려줍니다. 쿠버네티스를 운영하면서 가장 많이 확인하는 부분은 "),a("code",[t._v("Events")]),t._v("입니다. 현재 Pod의 상태를 이벤트별로 확인할 수 있습니다.")]),t._v(" "),a("h3",{attrs:{id:"pod-생성-분석"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pod-생성-분석"}},[t._v("#")]),t._v(" Pod 생성 분석")]),t._v(" "),a("p",[t._v("Pod은 다음과 같이 구성되어있습니다. minikube 클러스터 안에 Pod이 있고 Pod 안에 컨테이너가 있습니다.")]),t._v(" "),a("div",{staticStyle:{"text-align":"center",width:"300px","max-width":"100%",margin:"0 auto"}},[a("custom-image",{attrs:{src:"/imgs/guide/pod/pod-single.png",alt:"Pod(단일 컨테이너)"}})],1),t._v(" "),a("p",[a("code",[t._v("kubectl run")]),t._v("을 실행하고 Pod이 생성되는 과정을 살펴봅니다.")]),t._v(" "),a("pre",{staticClass:"mermaid-container"},[a("code",[a("Mermaid",{attrs:{id:"mermaid_382ee1e5",graph:t.$dataBlock.mermaid_382ee1e5}})],1)]),a("ol",[a("li",[a("code",[t._v("Scheduler")]),t._v("는 API서버를 감시하면서 할당되지 않은"),a("sup",[t._v("unassigned")]),t._v(" "),a("code",[t._v("Pod")]),t._v("이 있는지 체크")]),t._v(" "),a("li",[a("code",[t._v("Scheduler")]),t._v("는 할당되지 않은 "),a("code",[t._v("Pod")]),t._v("을 감지하고 적절한 "),a("code",[t._v("노드")]),a("sup",[t._v("node")]),t._v("에 할당 (minikube는 단일 노드)")]),t._v(" "),a("li",[t._v("노드에 설치된 "),a("code",[t._v("kubelet")]),t._v("은 자신의 노드에 할당된 "),a("code",[t._v("Pod")]),t._v("이 있는지 체크")]),t._v(" "),a("li",[a("code",[t._v("kubelet")]),t._v("은 "),a("code",[t._v("Scheduler")]),t._v("에 의해 자신에게 할당된 "),a("code",[t._v("Pod")]),t._v("의 정보를 확인하고 컨테이너 생성")]),t._v(" "),a("li",[a("code",[t._v("kubelet")]),t._v("은 자신에게 할당된 "),a("code",[t._v("Pod")]),t._v("의 상태를 "),a("code",[t._v("API 서버")]),t._v("에 전달")])]),t._v(" "),a("p",[t._v("잘 디자인된 모듈이 각자 역할을 충실하게 수행하고 있는 모습입니다. 현재 테스트는 단일 노드지만 노드가 수십, 수백 개가 되어도 "),a("code",[t._v("Scheduler")]),t._v("만 열심히 일하면 문제없는 구조입니다. "),a("s",[t._v("갓 구글!")])]),t._v(" "),a("p",[a("strong",[t._v("Pod 제거")])]),t._v(" "),a("p",[t._v("다음 실습을 진행하기 전에 이전에 생성한 Pod을 제거합니다.")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("kubectl delete pod/echo\n")])])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("리소스 제거")]),t._v(" "),a("p",[t._v("실습이 끝나면 "),a("code",[t._v("delete")]),t._v(" 명령어로 리소스를 제거해주세요.")])]),t._v(" "),a("h2",{attrs:{id:"yaml로-설정파일spec-작성하기"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#yaml로-설정파일spec-작성하기"}},[t._v("#")]),t._v(" YAML로 설정파일"),a("sup",[t._v("Spec")]),t._v(" 작성하기")]),t._v(" "),a("p",[a("code",[t._v("kubectl run")]),t._v(" 명령어는 실전에선 거의 사용하지 않습니다. 훨씬 더 복잡하고 다양한 설정이 필요한데 이를 "),a("code",[t._v("kubectl")]),t._v(" 명령어로 표현하면 금방 복잡해지고 관리가 어렵습니다. 원하는 리소스를 YAML 파일로 작성하면 복잡한 내용을 표현하기 좋고 변경된 내용을 버전 관리할 수 있습니다.")]),t._v(" "),a("p",[t._v("그럼 위에서 만든 Pod을 YAML 파일로 정의합니다.")]),t._v(" "),a("div",{staticClass:"language-yml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("apiVersion")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" v1\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("kind")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Pod\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("metadata")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" echo\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("labels")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("app")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" echo\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("spec")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("containers")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" app\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("image")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ghcr.io/subicura/echo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("v1\n")])])]),a("code-link",{attrs:{link:"guide/pod/echo-pod.yml"}}),t._v(" "),a("p",[a("code",[t._v("run")]),t._v(" 명령어로 생성할 때와 차이점은 "),a("code",[t._v("label")]),t._v("이 추가되었습니다. 쿠버네티스는 리소스를 관리할 때 "),a("code",[t._v("name")]),t._v("과 "),a("code",[t._v("label")]),t._v("을 이용합니다.")]),t._v(" "),a("p",[a("strong",[t._v("필수 요소")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("정의")]),t._v(" "),a("th",[t._v("설명")]),t._v(" "),a("th",[t._v("예")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("code",[t._v("version")])]),t._v(" "),a("td",[t._v("오브젝트 버전")]),t._v(" "),a("td",[t._v("v1, app/v1, networking.k8s.io/v1, ...")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("kind")])]),t._v(" "),a("td",[t._v("종류")]),t._v(" "),a("td",[t._v("Pod, ReplicaSet, Deployment, Service, ...")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("metadata")])]),t._v(" "),a("td",[t._v("메타데이터")]),t._v(" "),a("td",[t._v("name과 label, annotation(주석)으로 구성")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("spec")])]),t._v(" "),a("td",[t._v("상세명세")]),t._v(" "),a("td",[t._v("리소스 종류마다 다름")])])])]),t._v(" "),a("p",[a("code",[t._v("version")]),t._v(", "),a("code",[t._v("kind")]),t._v(", "),a("code",[t._v("metadata")]),t._v(", "),a("code",[t._v("spec")]),t._v("는 리소스를 정의할 때 반드시 필요한 요소입니다.")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("version")]),t._v(" "),a("p",[a("code",[t._v("Alpha(v1alpha1, ...)")]),t._v(" > "),a("code",[t._v("Beta(v1beta1, ...)")]),t._v(" > "),a("code",[t._v("Stable(v1)")]),t._v("의 과정을 거치며 쿠버네티스 버전에 따라 지원하는 리소스의 버전이 달라 실습할 때 주의해야 합니다. (쿠버네티스 이전 버전에서 최신 샘플을 배포하면 버전 오류가 발생할 수 있습니다.)")])]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Pod 생성")]),t._v("\nkubectl apply -f echo-pod.yml\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Pod 목록 조회")]),t._v("\nkubectl get pod\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Pod 로그 확인")]),t._v("\nkubectl logs "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v("\nkubectl logs -f "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Pod 컨테이너 접속")]),t._v("\nkubectl "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exec")]),t._v(" -it "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" -- "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sh")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ls")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ps")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# exit")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Pod 제거")]),t._v("\nkubectl delete -f echo-pod.yml\n")])])]),a("h2",{attrs:{id:"컨테이너-상태-모니터링"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#컨테이너-상태-모니터링"}},[t._v("#")]),t._v(" 컨테이너 상태 모니터링")]),t._v(" "),a("p",[a("code",[t._v("컨테이너 생성")]),t._v("과 실제 "),a("code",[t._v("서비스 준비")]),t._v("는 약간의 차이가 있습니다. 서버를 실행하면 바로 접속할 수 없고 짧게는 수초, 길게는 수분"),a("s",[t._v("Java ㅂㄷㅂㄷ")]),t._v("의 초기화 시간이 필요한데 실제로 접속이 가능할 때 "),a("code",[t._v("서비스가 준비되었다")]),t._v("고 말할 수 있습니다.")]),t._v(" "),a("custom-image",{attrs:{src:"/imgs/guide/pod/pod-monitoring.png",alt:"Pod(단일 컨테이너)"}}),t._v(" "),a("p",[t._v("쿠버네티스는 컨테이너가 생성되고 서비스가 준비되었다는 것을 체크하는 옵션을 제공하여 초기화하는 동안 서비스되는 것을 막을 수 있습니다.")]),t._v(" "),a("h3",{attrs:{id:"livenessprobe"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#livenessprobe"}},[t._v("#")]),t._v(" livenessProbe")]),t._v(" "),a("p",[t._v("컨테이너가 정상적으로 동작하는지 체크하고 정상적으로 동작하지 않는다면 "),a("strong",[t._v("컨테이너를 재시작")]),t._v("하여 문제를 해결합니다.")]),t._v(" "),a("p",[a("code",[t._v("정상")]),t._v("이라는 것은 여러 가지 방식으로 체크할 수 있는데 여기서는 "),a("code",[t._v("http get")]),t._v(" 요청을 보내 확인하는 방법을 사용합니다.")]),t._v(" "),a("div",{staticClass:"language-yml extra-class"},[a("div",{staticClass:"highlight-lines"},[a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("br")]),a("pre",{pre:!0,attrs:{class:"language-yml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("apiVersion")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" v1\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("kind")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Pod\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("metadata")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" echo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("lp\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("labels")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("app")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" echo\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("spec")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("containers")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" app\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("image")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ghcr.io/subicura/echo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("v1\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("livenessProbe")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("httpGet")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("path")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" /not/exist\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("port")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8080")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("initialDelaySeconds")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("timeoutSeconds")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Default 1")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("periodSeconds")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Defaults 10")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("failureThreshold")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Defaults 3")]),t._v("\n")])])]),a("code-link",{attrs:{link:"guide/pod/echo-lp.yml"}}),t._v(" "),a("p",[t._v("일부러 존재하지 않는 path(/not/exist)와 port(8080)를 입력하였습니다.")]),t._v(" "),a("p",[a("strong",[t._v("상태 확인")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("div",{staticClass:"highlight-lines"},[a("br"),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("br")]),a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("NAME      READY   STATUS             RESTARTS      AGE\necho-lp   0/1     CrashLoopBackOff   4 (15s ago)   60s\n")])])]),a("p",[t._v("정상적으로 응답하지 않았기 때문에 Pod이 여러 번 재시작되고 "),a("code",[t._v("CrashLoopBackOff")]),t._v(" 상태로 변경되었습니다.")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("상태체크")]),t._v(" "),a("p",[t._v("httpGet 외에 "),a("code",[t._v("tcpSocket")]),t._v(", "),a("code",[t._v("exec")]),t._v(" 방법으로 체크할 수 있습니다.")])]),t._v(" "),a("h3",{attrs:{id:"readinessprobe"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#readinessprobe"}},[t._v("#")]),t._v(" readinessProbe")]),t._v(" "),a("p",[t._v("컨테이너가 준비되었는지 체크하고 정상적으로 준비되지 않았다면 "),a("strong",[t._v("Pod으로 들어오는 요청을 제외")]),t._v("합니다.")]),t._v(" "),a("p",[t._v("livenessProbe와 차이점은 문제가 있어도 Pod을 재시작하지 않고 요청만 제외한다는 점입니다.")]),t._v(" "),a("div",{staticClass:"language-yml extra-class"},[a("div",{staticClass:"highlight-lines"},[a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("br")]),a("pre",{pre:!0,attrs:{class:"language-yml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("apiVersion")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" v1\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("kind")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Pod\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("metadata")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" echo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("rp\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("labels")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("app")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" echo\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("spec")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("containers")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" app\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("image")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ghcr.io/subicura/echo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("v1\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("readinessProbe")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("httpGet")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("path")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" /not/exist\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("port")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8080")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("initialDelaySeconds")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("timeoutSeconds")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Default 1")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("periodSeconds")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Defaults 10")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("failureThreshold")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Defaults 3")]),t._v("\n")])])]),a("code-link",{attrs:{link:"guide/pod/echo-rp.yml"}}),t._v(" "),a("p",[a("strong",[t._v("상태 확인")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("div",{staticClass:"highlight-lines"},[a("br"),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("br")]),a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("NAME      READY   STATUS    RESTARTS   AGE\necho-rp   0/1     Running   0          14s\n")])])]),a("p",[t._v("READY상태가 "),a("code",[t._v("0/1")]),t._v("인 것을 확인할 수 있습니다.")]),t._v(" "),a("h3",{attrs:{id:"livenessprobe-readinessprobe"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#livenessprobe-readinessprobe"}},[t._v("#")]),t._v(" livenessProbe + readinessProbe")]),t._v(" "),a("p",[t._v("보통 "),a("code",[t._v("livenessProbe")]),t._v("와 "),a("code",[t._v("readinessProbe")]),t._v("를 같이 적용합니다. 상세한 설정은 애플리케이션 환경에 따라 적절하게 조정합니다.")]),t._v(" "),a("div",{staticClass:"language-yml extra-class"},[a("div",{staticClass:"highlight-lines"},[a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("br")]),a("pre",{pre:!0,attrs:{class:"language-yml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("apiVersion")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" v1\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("kind")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Pod\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("metadata")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" echo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("health\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("labels")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("app")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" echo\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("spec")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("containers")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" app\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("image")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ghcr.io/subicura/echo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("v1\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("livenessProbe")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("httpGet")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("path")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" /\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("port")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3000")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("readinessProbe")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("httpGet")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("path")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" /\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("port")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3000")]),t._v("\n")])])]),a("code-link",{attrs:{link:"guide/pod/echo-pod-health.yml"}}),t._v(" "),a("p",[a("code",[t._v("3000")]),t._v("번 포트와 "),a("code",[t._v("/")]),t._v(" 경로는 정상적이기 때문에 Pod이 오류없이 생성된 것을 확인할 수 있습니다.")]),t._v(" "),a("h2",{attrs:{id:"다중-컨테이너"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#다중-컨테이너"}},[t._v("#")]),t._v(" 다중 컨테이너")]),t._v(" "),a("p",[t._v("대부분 "),a("code",[t._v("1 Pod = 1 컨테이너")]),t._v("지만 여러 개의 컨테이너를 가진 경우도 꽤 흔합니다.")]),t._v(" "),a("p",[t._v("하나의 Pod에 속한 컨테이너는 서로 네트워크를 "),a("strong",[t._v("localhost로 공유하고 동일한 디렉토리를 공유")]),t._v("할 수 있습니다.")]),t._v(" "),a("div",{staticClass:"language-yml extra-class"},[a("div",{staticClass:"highlight-lines"},[a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("br")]),a("pre",{pre:!0,attrs:{class:"language-yml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("apiVersion")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" v1\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("kind")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Pod\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("metadata")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" counter\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("labels")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("app")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" counter\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("spec")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("containers")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" app\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("image")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ghcr.io/subicura/counter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("latest\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("env")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" REDIS_HOST\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"localhost"')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" db\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("image")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" redis\n")])])]),a("code-link",{attrs:{link:"guide/pod/counter-pod-redis.yml"}}),t._v(" "),a("p",[t._v("요청횟수를 redis에 저장하는 간단한 웹 애플리케이션을 다중 컨테이너로 생성합니다.")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("환경변수 설정")]),t._v(" "),a("p",[t._v("이번 예제에서는 환경변수(env) 정의가 추가되었습니다. env는 "),a("code",[t._v("name")]),t._v("과 "),a("code",[t._v("value")]),t._v("를 별도로 정의합니다.")])]),t._v(" "),a("p",[t._v("다중 컨테이너를 포함한 Pod은 다음과 같습니다.")]),t._v(" "),a("div",{staticStyle:{"text-align":"center",width:"380px","max-width":"100%",margin:"0 auto"}},[a("custom-image",{attrs:{src:"/imgs/guide/pod/pod-multi.png",alt:"Pod(다중 컨테이너)"}})],1),t._v(" "),a("p",[t._v("같은 Pod에 컨테이너가 생성되었기 때문에 counter앱은 redis를 "),a("code",[t._v("localhost")]),t._v("로 접근할 수 있습니다.")]),t._v(" "),a("p",[t._v("아직 "),a("code",[t._v("Service")]),t._v("를 배우지 않아 브라우저 테스트는 어려우니 직접 컨테이너에 접속해서 테스트해보겠습니다.")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Pod 생성")]),t._v("\nkubectl apply -f counter-pod-redis.yml\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Pod 목록 조회")]),t._v("\nkubectl get pod\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Pod 로그 확인")]),t._v("\nkubectl logs counter "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 오류 발생 (컨테이너 지정 필요)")]),t._v("\nkubectl logs counter app\nkubectl logs counter db\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Pod의 app컨테이너 접속")]),t._v("\nkubectl "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exec")]),t._v(" -it counter -c app -- "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sh")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# curl localhost:3000")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# curl localhost:3000")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# telnet localhost 6379")]),t._v("\n  dbsize\n  KEYS *\n  GET count\n  quit\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Pod 제거")]),t._v("\nkubectl delete -f counter-pod-redis.yml\n")])])]),a("p",[t._v("멀티 컨테이너는 도커에선 볼 수 없던 개념입니다. 쿠버네티스는 멀티 컨테이너를 이용한 다양한 패턴이 존재합니다. 로그를 수집하는 별도의 컨테이너를 같은 Pod으로 배포한다던가, 서버가 실행되기 전 데이터베이스를 마이그레이션 하는 초기화 컨테이너를 만들 수도 있습니다.")]),t._v(" "),a("h2",{attrs:{id:"마무리"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#마무리"}},[t._v("#")]),t._v(" 마무리")]),t._v(" "),a("p",[t._v("Pod은 쿠버네티스에서 굉장히 중요한 요소이지만 단독으로 사용하는 경우는 거의 없습니다. Pod이 컨테이너를 관리하듯이 다른 컨트롤러가 Pod을 관리합니다.")]),t._v(" "),a("p",[t._v("kubectl과 YAML에 익숙해졌다면 남은 실습을 하고 다음 장으로 넘어갑니다.")]),t._v(" "),a("h2",{attrs:{id:"참고"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#참고"}},[t._v("#")]),t._v(" 참고")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#podspec-v1-core",target:"_blank",rel:"noopener noreferrer"}},[t._v("PodSpec v1 core"),a("OutboundLink")],1)]),t._v(" "),a("h2",{attrs:{id:"실습"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#실습"}},[t._v("#")]),t._v(" 실습")]),t._v(" "),a("p",[a("strong",[t._v("실습1. 다음 조건을 만족하는 Pod을 만드세요.")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("키")]),t._v(" "),a("th",[t._v("값")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("code",[t._v("Pod 이름")])]),t._v(" "),a("td",[t._v("mongodb")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("Pod Label")])]),t._v(" "),a("td",[t._v("app: mongo")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("Container 이름")])]),t._v(" "),a("td",[t._v("mongodb")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("Container 이미지")])]),t._v(" "),a("td",[t._v("mongo:4")])])])]),t._v(" "),a("details",{staticClass:"custom-block details"},[a("summary",[t._v("정답")]),t._v(" "),a("div",{staticClass:"language-yml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("apiVersion")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" v1\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("kind")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Pod\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("metadata")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" mongodb\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("labels")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("app")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" mongo\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("spec")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("containers")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" mongodb\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("image")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" mongo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v("\n")])])]),a("code-link",{attrs:{link:"guide/pod/exam1.yml"}})],1),t._v(" "),a("p",[a("strong",[t._v("실습2. 다음 조건을 만족하는 Pod을 만드세요.")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("키")]),t._v(" "),a("th",[t._v("값")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("code",[t._v("Pod 이름")])]),t._v(" "),a("td",[t._v("mariadb")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("Pod Label")])]),t._v(" "),a("td",[t._v("app: mariadb")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("Container 이름")])]),t._v(" "),a("td",[t._v("mariadb")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("Container 이미지")])]),t._v(" "),a("td",[t._v("mariadb:10.7")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("Container 환경변수")])]),t._v(" "),a("td",[t._v("MYSQL_ROOT_PASSWORD: 123456")])])])]),t._v(" "),a("details",{staticClass:"custom-block details"},[a("summary",[t._v("정답")]),t._v(" "),a("div",{staticClass:"language-yml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("apiVersion")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" v1\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("kind")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Pod\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("metadata")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" mariadb\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("labels")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("app")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" mariadb\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("spec")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("containers")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" mariadb\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("image")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" mariadb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10.7")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("env")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" MYSQL_ROOT_PASSWORD\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"123456"')]),t._v("\n")])])]),a("code-link",{attrs:{link:"guide/pod/exam2.yml"}})],1)],1)}),[],!1,null,null,null);"function"==typeof n&&n(r);s.default=r.exports}}]);